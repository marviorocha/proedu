
<%= title "Cadastrar Usuário" %>


<div class="main-content-container container-fluid px-4">



  <!-- Page Header -->
  <div class="page-header row no-gutters py-4">
    <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
      <span class="text-uppercase page-subtitle">editar</span>
      <h3 class="page-title">Profile</h3>
    </div>
  </div>

  <!-- End Page Header -->
  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), role:"form", html: { method: :put }) do |f| %>

    <div class="row">
      <div class="col-lg-4">
        <div class="card card-small mb-4 pt-3">
          <div class="card-header border-bottom text-center">
            <div class="mb-3 mx-auto">
              <% if resource.avatar.attached? %>
                <%= image_tag(resource.avatar.variant(resize: '100x100!'), class: 'rounded-circle') %>
              <% else %>
                <%= image_tag(gravatar(current_user.email, "100"), class: 'rounded-circle') %>

              <% end %>


            </div>
            <h4 class="mb-0"><%= current_user.name %> <%= current_user.lastname %></h4>
            <br>

          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item px-4">
              <div class="col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
                  </div>
                  <div class="custom-file">
                    <%= f.file_field :avatar, class: 'custom-file-input', id:"inputGroupFile01",
                      'aria-describedby': "inputGroupFileAddon01" %>
                    <input type="file" class="custom-file-input" >
                    <%= f.label :avatar, "Enviar imagem", class:"custom-file-label"  %>  
                  </div>
                </div>
            </li>

          </ul>
              </div>
        </div>
        <div class="col-lg-8">
          <div class="card card-small mb-4">
            <div class="card-header border-bottom">
              <h6 class="m-0">Detalhes da Conta</h6>
            </div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item p-3">
                <div class="row">
                  <div class="col">

                    <div class="form-row">

                      <div class="form-group col-md-6">
                        <label for="feFirstName">Nome:</label>
                        <%= f.text_field :name, class: 'form-control', placeholder: 'Digite seu nome' %>
                      </div>
                      <div class="form-group col-md-6">
                        <label for="feLastName">Sobre nome:</label>
                        <%= f.text_field :lastname, class: 'form-control', placeholder: 'Digite seu email' %>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <%= f.label :email, "Email:" %>
                        <%= f.email_field :email, autofocus: true, class: 'form-control', required: "email" %>
                      </div>
                    </div>
                    <!-- end form-row -->
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <%= f.label :password %> <i>(<%= t('.leave_blank_if_you_don_t_want_to_change_it', default: "leave blank if you don't want to change it") %>)</i>
                        <%= f.password_field :password, autocomplete: "off", class: 'form-control' %>
                      </div>
                      <div class="form-group col-md-6">
                        <%= f.label :password_confirmation %>
                        <%= f.password_field :password_confirmation, class: 'form-control'  %>
                      </div>

                      <div class="form-group col-md-12">
                        <%= f.label :current_password %> <i>(<%= t('.we_need_your_current_password_to_confirm_your_changes', default: 'we need your current password to confirm your changes') %>)</i>
                        <%= f.password_field :current_password, class: 'form-control' %>
                      </div>

                    </div>
                    <!-- end form-row -->
                    <div class="form-row">

                      <div class="form-group col-md-6">
                        <%= f.submit t('.update', default: 'Atualizar'), class: 'btn btn-primary' %>
                      </div>

                      <div class="form-group col-md-6">
                        <% if current_user.superadmin_role == true %>
                        <% else %>
                          <%= t('.unhappy', default: 'Deseja deletar sua conta') %>? 
                          <%= link_to t('.cancel_my_account', default: 'Apagar Minha Conta'),
                          registration_path(resource_name), data: { confirm: t('.are_you_sure', default: "Você realmente deseja deletar sua conta? Não será mais possível fazer login e todo o progresso das aulas será deletado!") },
                          method: :delete %>.
                        <% end %>
                      </div>

                    </div>
                  </div>
                </div> 
            </ul>
          </div>
        </div>

      <% end %>

      </div>
    </div>



